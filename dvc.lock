schema: '2.0'
stages:
  train:
    cmd: "papermill -p epochs 40 -p oversampling_strength 0.5 -p loss_weight_strength
      0.3 -p experiment_family soft_target notebook.ipynb out/notebook.ipynb\n"
    deps:
    - path: data/fer2013new.csv
      hash: md5
      md5: 413eba86d6e454536b99705b8c7fc5c5
      size: 1602762
    - path: data/ferplus_raw
      hash: md5
      md5: c1e362d46b29e52b02f2c96a2ae4bc84.dir
      size: 86418200
      nfiles: 35710
    - path: notebook.ipynb
      hash: md5
      md5: c97083d8749db6d04f49f50dfd03613e
      size: 28315
    params:
      params.yaml:
        epochs: 40
        loss_weight_strength: 0.3
        oversampling_strength: 0.5
    outs:
    - path: data/basemodel.onnx
      hash: md5
      md5: d980937642bbe4deb513a101eb5830bc
      size: 1713773
    - path: data/model.onnx
      hash: md5
      md5: caf16b33167c7e9cb93267ec597c8172
      size: 1728907
    - path: data/model.pt
      hash: md5
      md5: 92539e036e0032dcaf0d972148ed56ae
      size: 1696273
    - path: metrics/test.json
      hash: md5
      md5: 510d61e2032e40d761499efe8bdec6e1
      size: 1070
    - path: metrics/train.json
      hash: md5
      md5: 4b76c754c19d86879b726f3ee5571da1
      size: 1061
  generate_assets:
    cmd: "rm -rf static/assets && mkdir static/assets && cp data/model.onnx static/assets/
      && cp data/basemodel.onnx static/assets/ && cp data/ultraface-RFB-320.onnx static/assets/\n"
    deps:
    - path: data/basemodel.onnx
      hash: md5
      md5: d980937642bbe4deb513a101eb5830bc
      size: 1713773
    - path: data/model.onnx
      hash: md5
      md5: caf16b33167c7e9cb93267ec597c8172
      size: 1728907
    - path: data/ultraface-RFB-320.onnx
      hash: md5
      md5: 1456b253b02dcd6a0e02a6d8ad69b136
      size: 1270727
  prepare_data:
    cmd: "papermill ferplus_data_preparation.ipynb out/ferplus_data_preparation.ipynb\n"
    deps:
    - path: data/fer2013new.csv
      hash: md5
      md5: 413eba86d6e454536b99705b8c7fc5c5
      size: 1602762
    - path: data/ferplus_raw
      hash: md5
      md5: c1e362d46b29e52b02f2c96a2ae4bc84.dir
      size: 86418200
      nfiles: 35710
    outs:
    - path: data/ferplus
      hash: md5
      md5: 4457842dba9952606cb95c2343a29374.dir
      size: 86420620
      nfiles: 35711
